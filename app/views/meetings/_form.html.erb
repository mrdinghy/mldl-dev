<div class="container">

  <div class="panel panel-default">

    <div class="panel-heading"><h2><%= @panelheader %></h2>
      <%if params[:action] == "edit" %><h2><strong><%= @meeting.name %></strong></h2><% end %></div>

    <div class="panel-body">



    <%= simple_form_for @meeting do |f| %>
          <div class="form-horizontal">
    <% if @meeting.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@meeting.errors.count, "error") %> prohibited this meeting from being saved:</h2>

          <ul>
            <% @meeting.errors.full_messages.each do |message| %>
                <li><%= message %></li>
            <% end %>
          </ul>
        </div>
    <% end %>






            <div class="form-group">
              <%= f.label :location, :class => "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <%= f.text_field :location, :size => 50, :class => "form-control" %>
              </div>
            </div>

            <div class="form-group">
              <%= f.label :structure_id, :class => "col-sm-3 control-label" %>
              <div class="col-sm-9">
                <% if params[:structure_id] %>
                    <%= f.hidden_field :structure_id, :value => params[:structure_id] %>

                    <%= @meeting.structure.name %>
                <% else %>

                    <%= f.collection_select(:structure_id, Structure.all, :id, :name, include_blank: true, :class => "form-control") %>
                <% end %>


              </div>
            </div>

<!---

            <p>From Date: < <input type="text" style="width: 88px;" class="datepicker" id="dataStart" size="10" name="dataStart" /></p>
            <p>To Date:  <input type="text" style="width: 88px;" class="end_date" id="dataEnd" size="10" name="dataEnd" value="" readonly /></p>


--->

            <div class="form-group">
              <%= f.label 'Meeting Start', :class => "col-sm-3 control-label" %>
              <div class="col-sm-3" id="sandbox-container">
                <div class="input-group date">
                  <input type="text" class="form-control" width="80">
                </div>

              </div>

              <%= f.label 'Time Start', :class => "col-sm-1 control-label" %>
              <div class="col-sm-3 id="sandbox-container">
                <div class="input-group date">
                  <input id="stepExample1" type="text" class="time" />
                </div>

              </div>
            </div>


                <% if params[:action] == 'edit' %>

                    <div class="form-group">
                        <%= f.label 'Meeting Duration (Hours)', :class => "col-sm-3 control-label" %>
                        <div class='col-sm-9 input-group date'>
                            <%=f.select :duration, (0..8).step(0.25).map{|x| ["#{ x }", x.to_f]}, {}, include_blank: true %>

                        </div>
                    </div>

                    <div class="form-group">
                        <%= f.label ' Has the Meeting been held?', :class => "col-sm-3 control-label" %>
                        <div class='col-sm-9 input-group date'>

                            <%= f.check_box :meeting_held %>

                        </div>
                    </div>


                    <div class="row">
                        <div class="col-sm-10"></div>
                    </div>
                    <div class="form-group">
                        <%= hidden_field_tag "meeting[issue_ids][]", nil %>
                        <h3><%= @meeting.structure.name %> Open Issues</h3>
                        <table class="table table-striped">
                        <thead>

                        <th>Add to Agenda</th>
                        <th>Name</th>
                        <th></th>
                        </thead>
                        <tbody>


                        <% @openissues.all.each do |issue| %>
                             <tr><td>  <%= check_box_tag "meeting[issue_ids][]", issue.id, @meeting.issue_ids.include?(issue.id), id: dom_id(issue) %></td>
                            <td>
                            <%= label_tag dom_id(issue), issue.name %></td>
                            </tr>
                        <% end %>



                        </tbody>
                        </table>



                    </div>
                <% end %>
                    <div class="form-group">
                        <div class = "col-sm-2 control-label"></div>
                    <div class="col-sm-10">
                    <%= f.submit :class => "btn btn-primary" %>

                    </div>
                    </div>


                    </div>

<% end %>

</div>
        </div>
      </div>
<script>
    $('#sandbox-container input').datepicker({
    });
    $('#stepExample1').timepicker({ 'step': 15 });
</script>